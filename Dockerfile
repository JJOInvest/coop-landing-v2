FROM node:20-alpine

ARG ZENDESK_URL
ARG ZENDESK_TOKEN
ARG NEXT_PUBLIC_API_DOMAIN

RUN apk add --no-cache git

WORKDIR /app

COPY . ./

ENV ZENDESK_URL=$ZENDESK_URL
ENV ZENDESK_TOKEN=$ZENDESK_TOKEN
ENV NEXT_PUBLIC_API_DOMAIN=$NEXT_PUBLIC_API_DOMAIN

RUN yarn install --frozen-lockfile

RUN yarn build

CMD [ "yarn", "dev" ]
